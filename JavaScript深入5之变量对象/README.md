# JavaScript深入之变量对象

## 前言

在上篇文章中我们说道，当JavaScript代码执行一段可执行代码时，会创建对应的执行上下文。

对于每个执行上下文，都有三个重要属性：

+ 变量对象
+ 作用域链
+ this

今天主要讲讲创建变量对象的过程

## 变量对象

变量对象是与执行上下文相关的数据作用域， 存储了在上下文中定义的变量和函数声明

因为不同执行上下文下的变量对象稍有不同，所以我们来聊聊全局上下文下的变量对象和函数上下文下的变量对象。

## 全局上下文

我们先了解一个概念， 叫全局对象。在W3School中也有介绍：
> 全局对象是预定义的对象，作为JavaScript的全局函数和全局属性的占位符。通过使用全局对象，可以访问所有其他所有预定义的对象、函数和属性。

> 在顶层JavaScript代码中，可以用关键字this引用全局对象。 因为全局对象是作用域链的头，这意味着所有非限定性的变量和函数名都会作为该对象的属性来查询。

> 例如当JavaScript代码引用parseInt()函数时，它引用的是全局对象的parseInt属性。全局对象是作用域链的头，还意味着在顶层JavaScript代码中声明的所有变量都将成为全局对象的属性。

如果看的不是很懂得话，容我再来介绍一下全局对象：

1.可以通过this引用，在客户端JavaScript中，全局对象就是Window对象。

```js
console.log(this)
```

2.全局对象是由Object构造函数实例化的一个对象

```js
console.log(this instanceof Object)
```

3.预定义了一堆，嗯，一大堆函数和属性

```js
// 都能生效
console.log(Math.random());
console.log(this.Math.random());
```

4.作为全局变量的宿主

```js
var a = 1;
console.log(this.a);
```

5.客户端JavaScript中，全局对象有window属性指向自身

```js
var a = 1;
console.log(window.a);

this.window.b = 2;
console.log(this.b);
```

花了一个大篇幅介绍全局对象，其实就想说：

全局上下文中的变量对象就是全局对象呐!!!

## 函数上下文

在函数上下文中，我们用活动对象来表示变量对象

活动对象和变量对象其实是一个东西，只是变量对象是规范上的或者说是引擎实现上的，不可在JavaScript环境中访问，只有到当进入一个执行上下文中，这个执行上细纹的变量对象才会被激活，所以才叫 activation object，而只有被激活的变量对象，也就是活动对象上的各种属性才能被访问